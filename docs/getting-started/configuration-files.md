# Configuration Files

This guide explains the key configuration files in the Shooting Star project and their purposes.

## Overview

The project uses several configuration files to manage different aspects of the build process, development environment, and application behavior.

## Core Configuration Files

### `react-router.config.ts`

The main React Router configuration file that defines how the application is built and rendered.

```typescript
// Key configuration aspects:
export default {
  ssr: true,                    // Enable server-side rendering
  buildDirectory: "build",      // Output directory for builds
  future: {                     // Future React Router features
    unstable_singleFetch: true
  }
}
```

**Purpose**: 
- Enables server-side rendering (SSR) for better SEO and performance
- Configures build output locations
- Enables future React Router features

**When to modify**: 
- Changing build output directories
- Enabling/disabling SSR
- Updating to new React Router features

### `vite.config.ts`

Vite build tool configuration for development and production builds.

```typescript
// Key plugins and settings:
export default defineConfig({
  plugins: [
    reactRouter(),              // React Router integration
    tailwindcss(),             // TailwindCSS processing
    tsconfigPaths()            // TypeScript path aliases
  ]
})
```

**Purpose**:
- Integrates TailwindCSS with Vite build process
- Enables TypeScript path aliases (`~/` â†’ `./app/`)
- Configures React Router build plugin

**When to modify**:
- Adding new Vite plugins
- Changing path aliases
- Updating build optimization settings

### `tsconfig.json`

TypeScript compiler configuration with strict mode enabled.

```json
{
  "compilerOptions": {
    "strict": true,              // Enable all strict type checks
    "target": "ES2022",          // Modern JavaScript target
    "lib": ["ES2022", "DOM"],    // Available APIs
    "paths": {
      "~/*": ["./app/*"]         // Path alias configuration
    }
  }
}
```

**Purpose**:
- Enables strict TypeScript checking for better code quality
- Sets up path aliases for clean imports
- Configures target JavaScript version and available APIs

**When to modify**:
- Changing TypeScript strict settings
- Adding new path aliases
- Updating target JavaScript version

### `package.json`

Node.js project configuration and dependency management.

**Key Scripts**:
```json
{
  "scripts": {
    "dev": "react-router dev",           # Development server
    "build": "react-router build",       # Production build
    "start": "react-router-serve build/server/index.js",  # Production server
    "typecheck": "react-router typegen && tsc"            # Type checking
  }
}
```

**Key Dependencies**:
- **@react-router/dev** - Development tools and build system
- **@react-router/node** - Node.js runtime support
- **@react-router/serve** - Production server
- **tailwindcss** - CSS framework
- **typescript** - Type system

**When to modify**:
- Adding new dependencies
- Changing build scripts
- Updating Node.js version requirements

## Generated Configuration Files

### `.react-router/types/`

**Auto-generated TypeScript types** based on your route structure.

**Purpose**:
- Provides type safety for route parameters
- Auto-completes route names in IDE
- Updates automatically when routes change

**Important**: 
- Never edit these files manually
- Generated by `npm run typecheck`
- Should be included in version control

### `tailwind.config.js` (Generated)

TailwindCSS configuration generated by the TailwindCSS Vite plugin.

**Contains**:
- Custom color palette definitions
- Typography scale configuration
- Design system tokens

**Generated from**: CSS custom properties in `app/app.css`

## Environment Configuration

### `.env` Files (Optional)

You can create environment-specific configuration files:

- `.env` - Default environment variables
- `.env.local` - Local development overrides (git-ignored)
- `.env.production` - Production-specific variables

**Example variables**:
```bash
# API endpoints
VITE_API_URL=https://api.example.com

# Feature flags
VITE_ENABLE_ANALYTICS=true

# Build configuration
VITE_BUILD_VERSION=1.0.0
```

**Note**: Variables must be prefixed with `VITE_` to be available in the browser.

### `fly.toml` (Deployment)

Fly.io deployment configuration for production hosting.

**Key sections**:
```toml
[build]
  image = "node:18-alpine"

[env]
  PORT = "3000"

[http_service]
  internal_port = 3000
```

**Purpose**: Configures container deployment settings for Fly.io

## Docker Configuration

### `Dockerfile`

Multi-stage Docker build configuration for containerized deployment.

**Stages**:
1. **Base** - Node.js environment setup
2. **Build** - Dependency installation and build process
3. **Production** - Optimized runtime image

**When to modify**:
- Changing Node.js version
- Adding system dependencies
- Optimizing container size

### `.dockerignore`

Specifies files and directories to exclude from Docker builds.

**Common exclusions**:
- `node_modules/`
- `.git/`
- `build/`
- Development files

## Configuration Best Practices

### Development vs Production

**Development**:
- Hot module replacement enabled
- Source maps for debugging
- Verbose error messages
- Development-only dependencies

**Production**:
- Minified assets
- Optimized bundles
- Error boundaries for graceful failures
- Production-only optimizations

### Type Safety

**Always use TypeScript strict mode**:
- Catches potential runtime errors at compile time
- Improves code maintainability
- Better IDE support and autocomplete

### Path Aliases

**Use the `~/` alias for app imports**:
```typescript
// Good
import { Welcome } from "~/welcome/welcome";

// Avoid
import { Welcome } from "../welcome/welcome";
```

### Environment Variables

**Best practices**:
- Use `VITE_` prefix for client-side variables
- Never commit sensitive data to `.env` files
- Use `.env.local` for local development secrets
- Document required environment variables

## Troubleshooting Configuration Issues

### TypeScript Errors
```bash
# Regenerate types
npm run typecheck

# Clear TypeScript cache
rm -rf .react-router/types
npm run typecheck
```

### Build Issues
```bash
# Clear build cache
rm -rf build/
npm run build

# Clear node modules
rm -rf node_modules/
npm install
```

### Path Alias Issues
1. Check `tsconfig.json` paths configuration
2. Ensure `vite.config.ts` includes `tsconfigPaths()` plugin
3. Restart development server after changes

---

**Next Steps**: 
- Review the [Setup Guide](./setup.md) for development environment setup
- Explore the [Tech Stack](../architecture/tech-stack.md) documentation
- Check [Troubleshooting](../reference/troubleshooting.md) for common configuration issues